@startuml CU-GE-008_Validacion_Pagos_Detallado
title Diagrama de Actividades - Proceso Detallado de Validación de Pagos (CU-GE-008)

|#lightgreen|Contabilidad|
start
:Recibe solicitud de validación de pago;
:Revisa el comprobante de pago adjunto;
:Identifica el método de pago;
note right
  Métodos disponibles:
  - Depósito en ventanilla bancaria
  - Transferencia electrónica bancaria
  - Pago en efectivo en caja (<$2,000 MXN)
  - Tarjeta crédito/débito (Visa/MasterCard)
  - Tarjeta MSI (≥$3,000 MXN, Visa/MasterCard)
  - Pago mediante enlace
end note

if (¿Método de pago?) then (Depósito bancario)
  :Verifica comprobante de depósito recibido;
elseif (Transferencia electrónica) then 
  :Valida comprobante recibido y confirma en sistema bancario;
elseif (Efectivo en caja) then
  :Confirma recibo físico y monto permitido;
elseif (Tarjeta crédito/débito) then
  :Verifica transacción con la entidad correspondiente;
elseif (Tarjeta MSI) then
  :Confirma condiciones y aprobación de la transacción;
else (Pago mediante enlace)
  |#orange|Equipo de ventas|
  :Solicita generación de enlace de pago;
  |#whitesmoke|Módulo administrativo|
  :Registra solicitud y deriva a Tecnologías;
  |#pink|Dpto. Tecnologías|
  :Genera enlace de pago;
  |#whitesmoke|Módulo administrativo|
  :Recibe enlace y notifica al Equipo de ventas;
  |#orange|Equipo de ventas|
  :Remite enlace al participante;
  |#whitesmoke|Módulo administrativo|
  :Registra envío del enlace;
  |#lightgreen|Contabilidad|
  ' Eliminado paso redundante de verificación posterior a la condición
endif

if (¿El pago se confirma?) then (Sí)
  :Registra confirmación del pago;
else (No)
  :Registra rechazo e indica motivo;
endif

stop
@enduml
